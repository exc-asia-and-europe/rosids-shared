<html>
    <head>
        <title>Test</title>
        <meta charset="UTF-8"/>
        <link href="/exist/apps/cluster-shared/resources/script/vendor/select2/select2.css" rel="stylesheet"/>
        <script type="text/javascript" src="resources/script/vendor/jquery/dist/jquery.min.js"/>
        <script type="text/javascript" src="resources/script/vendor/select2/select2.min.js"/>
    </head>
    <body>
        <div style="width:500px;">
            <input id="global" type="hidden" autocomplete="off" value="100"/>
        </div>
        <script>
        $(document).ready(function() {
            $("#global").select2({
                formatResult: function (object) {
                    return  "<span>" + object.name + "</span>";
                },
                formatSelection: function (object) {
                    return  "<span>" + object.name + "</span>";
                },
                formatNoMatches: "<div>No matches</div>",
                dropdownCssClass: "bigdrop",
                id: function(object) {
                    return object.id;
                },
                ajax: {
                    url: "modules/repositories/repositories.xq?group=custom",
                    dataType: "json",
                    crossDomain: true,
                    results: function (data, page) {
                        return {results: data.repository};
                    }
                }
            });
        });
    </script>
    </body>
</html>